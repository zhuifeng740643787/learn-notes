# 协程
- 一种轻量级的用户态线程，cpu非抢占式
- 共享进程内存，全局变量
- 每个worker进程只有一个线程，以单线程形式运行线程（避免各种同步锁的问题），那么同一时刻只有一个协程在运行
- 如何执行：基于线程的，内部实现上，维护了一组数据结构和n个线程，真正的执行还是线程，协程执行的代码被扔进一个待执行队列中，由这 n 个线程从队列中拉出来执行。
- 如何切换：对各种io函数进行了封装，这些封装的函数提供给应用程序使用，
而其内部调用了操作系统的异步io函数，当这些异步函数返回busy或bloking时，利用这个时机将现有的执行序列压栈，让线程去拉另外一个协程的代码来执行，基本原理就是这样，利用并封装了操作系统的异步函数。包括 linux 的 epoll、select 和 windows 的 iocp、event 等。
 
## 特点
- 高并发（每秒钟上千数万的单机访问量）
- Request/Response, 程序生命周期端（毫秒，秒级）
- 高IO，低计算，屏蔽网络编程的劣势

## 优缺点
- 优点
    + 内存消耗低，kb级别
    + 切换调度开销低：只有三个寄存器的值修改 - PC / SP / DX
- 缺点
    + 无法实现公平调度


## 注意
- 不能存在阻塞代码

