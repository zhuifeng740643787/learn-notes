# 动态规划法

## 概念
- ### 最优化原理
  - 根据一类多阶段问题的特点，把“**多阶段决策**”问题变换为一系列互相联系的“**单阶段问题**”，然后逐个加以解决。
    而且一些静态模型，只要人为的**引进“时间”因素**，分成时段，就可以转化成多阶段的动态模型，用动态规划方法去处理。
  - 原理：一个过程的最优决策具有这样的性质：即无论其初始状态和初始决策如何，其今后诸策略对于第一个决策所形成的状态作为初始状态的过程而言，必须构成最优策略。简言之，**一个最优策略的子策略，对于它的初态和终态而言也必是最优的**。
  - 数学化描述：假设为了解决某一优化问题，需要依次做出n个决策D1,D2...Dn，如若这个决策序列是最优的，对于任何一个整数k，1<k<n，不论前面k个决策是怎样的，以后的最优决策只取决于由前面决策所确定的当前状态，即以后的决策Dk+1,Dk+2,...,Dn也是最优的

## 解决的问题所满足的条件
最优化原理是动态规划的基础，任何一个问题，如果失去了这个最优化原理的支持，就不可能用动态规划方法计算。
能采用动态规划求解的问题都需要满足一定的条件：
- 满足最优化原理：问题的最优解所包含的子问题的解也是最优的，就称该问题具有最优子结构，即满足最优化原理
- 无后效性：即某阶段状态一旦确定，就不受这个状态以后决策的影响。也就是说，某状态以后的过程不会影响当前的状态，只与当前状态有关
- 有重叠子问题：即子问题之间是不独立的，一个子问题在下一阶段决策中可能被多次使用到（该性质并不是动态规划适用的必要条件，但是如果没有这条性质，动态规划算法同其他算法相比就不具备优势）


**所谓的无后效性是指：下一时刻的状态只与当前状态有关，而和当前状态之前的状态无关，当前的状态是对以往决策的总结**

## 求解模式

动态规划所处理的问题是一个多阶段决策问题，一般由初始状态开始，通过对中间阶段决策的选择，达到结束状态。
这些决策形成了一个决策序列，同时确定了完成整个过程的一条活动路线（通常是求最优的活动路线），一般经历以下几个步骤：

初始状态 -> | 决策1 | -> | 决策2 | ->  ...  -> | 决策n | -> 结束状态

1. 划分阶段： 按照问题的时间或空间特征，把问题分为若干个阶段。注意划分后的阶段一定是**有序的或者是可排序的**，否则就无法求解
2. 确定状态和状态变量： 将问题发展到各个阶段时所处于的各种客观情况用不同的状态表示出来，状态的选择要满足无后效性 
3. 确定决策并写出状态转移方程： 因为决策和状态转移有着天然的联系，状态转移就是根据上一阶段的状态和决策来导出本阶段的状态。所以如果确定了决策，状态转移方程也就可写出，但事实上常常是反过来做，根据相邻两段个状态之间的关系来确定决策
4. 寻找边界条件： 给出的状态转移方程是一个递推式，需要一个递推的终止条件和边界条件

步骤简化：
1. 分析最优解的性质，并刻画其结构特征
2. 递归的定义最优解
3. 以自底向上或自顶向下的记忆化方式（备忘录法）计算出最优值
4. 根据计算最优值时得到的信息，构造问题的最优解

## 算法实现
动态规划的主要难点在于理论上的设计，也就是上面4个步骤的确定，一旦设计完成，实现部分就会非常简单。
使用动态规划求解问题，最重要的就是确定动态规划三要素：
1. 问题的阶段 
2. 每个阶段的状态
3. 从前一个阶段转化到后一个阶段之间的递推关系。


递推关系必须是从次小的问题开始到较大的问题之间的转化，从这个角度来说，动态规划往往可以用递归程序来实现，不过因为递推可以充分利用前面保存的子问题的解来减少重复计算，所以对于大规模问题来说，有递归不可比拟的优势，这也是动态规划算法的核心之处。<br/>
确定了动态规划的这三要素，整个求解过程就可以用一个最优决策表来描述，最优决策表是一个二维表，其中行表示决策的阶段，列表示问题状态，表格需要填写的数据一般对应此问题的在某个阶段某个状态下的最优值（如最短路径，最长公共子序列，最大价值等），填表的过程就是根据递推关系，从1行1列开始，以行或者列优先的顺序，依次填写表格，最后根据整个表格的数据通过简单的取舍或者运算求得问题的最优解。




## 应用
- 动态规划球0/1背包问题
- 最长公共子串问题的实现
- 用动态规划实现导弹拦截
- 最大化投资回报问题的实现